.ia-layout
  .ia-items
    .ia-categories
      .ia-resource__action-wrapper
        = link_to '+ Add category', new_cms_category_path, class: 'resource-action-button link', remote: true

      .ia-categories__list#categories-list
        = render 'cms/categories/partials/column'

        / - @categories.each do |category|
        /   .ia-resource__wrapper
        /     = render 'cms/partials/categorized-item', resource: category, paths: category_paths(category)

    .ia-subcategories#subcategories-list
    .ia-teams#teams-list

#modal.modal.fade aria-hidden="true" aria-labelledby="modal" role="dialog" tabindex="-1"
  .modal-dialog role="document"
    .modal-content.app-modal-content#modal-content

javascript:
    function onCategoryAdded(htmlString) {
        const el = $(document.createElement('div'))
          .addClass('ia-resource__wrapper')
          .html(htmlString)
        $('.ia-categories__list').prepend(el)
    }

    function onSubcategoryAdded(htmlString) {
        const el = $(document.createElement('div'))
            .addClass('ia-resource__wrapper')
            .html(htmlString)
        $('.ia-subcategories__list').prepend(el)
    }

    $(document).on('click', '.more-action', function (event) {
        const wrapper = $(event.target).closest('.categorized-item-wrapper');
        const id = wrapper.attr('data-id');
        const type = wrapper.attr('data-type');
        wrapper.find('.categorized-item-menu').addClass('is-open');

        function hideMenu(event) {
            if (!$(event.target).closest(`.categorized-item-wrapper[data-id=${id}]`).length) {
                $(`.categorized-item-wrapper[data-id=${id}] .categorized-item-menu`).removeClass('is-open')
                $(document).off('click', hideMenu)
            }
        }

        $(document).off('click', hideMenu);
    });

    $(document).on('click', '.categorized-item-menu__preview', function (event) {
        $(event.target).closest('.categorized-item-menu').removeClass('is-open');
    });